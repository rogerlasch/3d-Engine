#include <iostream>
#include <gpp/gpp.h>
#include <gpp_physics/gpp_physics.h>
#include <cmath>

using namespace gpp;
using namespace std;

int main()
{
sphere3d s({50, 50, 250}, 25);
box3d b({-10,-10,-10}, {100,100,10});
RigidBody rb, ground;
initRigidBody(&rb, &s, 100);
initRigidBody(&ground, &b, 0.0f);
vector3d gravity={0,0,-9.8f};
rb.setName("rb");
ground.setName("Chão");
ground.setRestitution(0.0f);
rb.setRestitution(0.75f);
rb.setPosition(s.GetCenter());
ground.setPosition(b.GetCenter());
int x=0;
//_FLOG("Rb:\n{}", rb.toString());
IntegratorVerlet vt;
CollisionSolver cs;
bool showb=false;
CollisionData info;
while(x<1000)
{
rb.setForce(gravity);
if(showb)
{
_FLOG("{}", rb.getPosition().z);
}
vt.integrate(&rb, 0.2f);
if(showb)
{
_FLOG("{}", rb.getPosition().z);
}
if(collision3d::sphereBox(&s, &b, &info))
{
showb=true;
x++;
cs.solve(&rb, &ground, &info);
}
if(rb.getPosition().z<-10) break;
}
_FLOG("RB final:\n{}", rb.toString());
    return 0;
}

